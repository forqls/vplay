<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>크리에이티브 플랫폼</title>
    <script src="https://code.jquery.com/jquery-3.7.1.js"
            integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <link href="/css/topbar.css" rel="stylesheet" type="text/css">
    <link href="/css/common.css" rel="stylesheet" type="text/css">
    <link href="/css/index.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css"/>
    <link rel="icon" href="/img/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">




    <style>
        .swiper-button-prev, .swiper-rtl .swiper-button-next {
            left: var(--swiper-navigation-sides-offset, 150px) !important;
            right: auto;
        }

        .swiper-button-next, .swiper-rtl .swiper-button-prev {
            right: var(--swiper-navigation-sides-offset, 195px) !important;
            left: auto;
        }

        .Ghost {
            width: 130px;
        }

    </style>
</head>
<body>
<div th:replace="~{views/common/topbar :: topbar}"></div>
<div th:replace="~{views/common/floatingBtn}"></div>

<div class="container">
    <div class="swiper mySwiper">
        <!-- 첫번째 슬라이드ㅋㅋ -->
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <section class="hero">
                    <div class="hero-content">
                        <h1 class="title_wrap">
                            아이디어가 샘<span>솟는</span><br/>
                            무제한 크리에<span>이티브</span> 공간
                            <img src="/img/slider-bg.png" alt="몽글한 부분 배경">
                        </h1>
                        <p>
                            지금 바로 크리에이터님의 <br> 무한 가능성을 경험해 보세요.
                        </p>
                        <div class="hero-buttons">
                            <button class="button-primary" onclick="location.href='/board/all_menu'">All Menu</button>
                        </div>
                    </div>
                    <div class="hero-image-wrap">
                        <div class="hero-image">
                            <img src="/img/main_img.png" alt="Boy crossing a stream bridge"/>
                        </div>
                        <img class="snail" src="/img/snail.png" alt="snail"/>
                        <img class="bee" src="/img/bee.png" alt="bee"/>
                    </div>
                </section>
            </div>
            <!-- 두번째 슬라이드 -->
            <div class="swiper-slide">
                <section class="hero">
                    <div class="hero-content">
                        <h1 class="title_wrap">
                            상상을 영상<span>으로,</span><br/>
                            무한한 아이디<span>어를 현실로</span>
                            <img src="/img/slider-bg.png" alt="몽글한 부분 배경">
                        </h1>
                        <p>
                            지금 바로 당신만의 <br> 스토리를 영상으로 담아보세요.
                        </p>
                        <div class="hero-buttons">
                            <button class="button-primary" onclick="location.href='/board/video-template-list'">Video
                                Templates
                            </button>
                        </div>
                    </div>
                    <div class="hero-image-wrap hero-imageCustom">
                        <div class="hero-image">
                            <img src="/img/GhostKing.jpg" alt="Boy crossing a stream bridge"/>
                        </div>
                        <img class="Ghost_custom Ghost" src="/img/GhostChild.png" alt="GhostBaby"/>
                        <img class="Ghost_custom02 Ghost" src="/img/GhostBaby.png" alt="GhostChild"/>
                    </div>
                </section>
            </div>
            <!-- 셋~번~쨰~ -->
            <div class="swiper-slide">
                <section class="hero">
                    <div class="hero-content">
                        <h1 class="title_wrap">
                            디자인이 필<span>요할 땐,</span><br/>
                            영감이 터지는 그<span>래픽</span>템플릿
                            <img src="/img/slider-bg.png" alt="몽글한 부분 배경">
                        </h1>
                        <p>
                            지금 바로 감각적인 디자인을 <br> 손쉽게 시작해보세요.
                        </p>
                        <div class="hero-buttons">
                            <button class="button-primary" onclick="location.href='/board/graphic-template-list'">
                                Graphic Templates
                            </button>
                        </div>
                    </div>
                    <div class="hero-image-wrap">
                        <div class="hero-image">
                            <img src="/img/main_img.png" alt="Boy crossing a stream bridge"/>
                        </div>
                        <img class="snail" src="/img/snail.png" alt="snail"/>
                        <img class="bee" src="/img/bee.png" alt="bee"/>
                    </div>
                </section>
            </div>
        </div>

    </div>
    <span class="buttonWrap">
			  <div class="swiper-button-prev"></div>
			  <div class="swiper-button-next"></div>
		</span>

    <!-- MD 추천 템플릿 -->
    <section class="section">
        <h2 class="section-title">MD가 추천하는 템플릿 리스트</h2>
        <div class="template-grid" id="template-grid-wrap">
            <div class="template-card" th:each="md : ${mdList}">
                <input type="hidden" th:value="${md.contentNo}">
                <input type="hidden" th:value="${md.menuNo}">
                <div class="template-details">
                    <div class="template-image"></div>
                    <div class="overlay"></div>
                    <div class="content_wrap">
							<span class="content_title_wrap">
								<div class="template-title">[[${md.contentTitle}]]</div>
								<div class="template-writer">[[${md.userNickName}]]</div>
							</span>
                        <span class="icon_wrap">
								<span class="icon">
									<svg width="16" height="17" viewBox="0 0 16 17" fill="none"
                                         xmlns="http://www.w3.org/2000/svg">
									<path fill-rule="evenodd" clip-rule="evenodd"
                                          d="M7.9973 0C7.76163 0 7.53562 0.0894793 7.36897 0.248754C7.20233 0.408028 7.10871 0.62405 7.10871 0.849298V2.54789H1.77718C1.30584 2.54789 0.853809 2.72685 0.520523 3.0454C0.187238 3.36395 0 3.79599 0 4.24649V15.2874C0 15.7379 0.187238 16.1699 0.520523 16.4885C0.853809 16.807 1.30584 16.986 1.77718 16.986H14.2174C14.6888 16.986 15.1408 16.807 15.4741 16.4885C15.8074 16.1699 15.9946 15.7379 15.9946 15.2874V4.24649C15.9946 3.79599 15.8074 3.36395 15.4741 3.0454C15.1408 2.72685 14.6888 2.54789 14.2174 2.54789H8.88589V0.849298C8.88589 0.62405 8.79227 0.408028 8.62563 0.248754C8.45899 0.0894793 8.23297 0 7.9973 0ZM8.88589 2.54789V10.0455L10.5102 8.49298C10.6768 8.33362 10.9029 8.24404 11.1386 8.24396C11.3743 8.24388 11.6004 8.3333 11.7671 8.49255C11.9339 8.6518 12.0276 8.86784 12.0277 9.09313C12.0278 9.31843 11.9342 9.53452 11.7676 9.69389L8.78193 12.5467C8.57365 12.7456 8.29128 12.8573 7.99686 12.8573C7.70244 12.8573 7.42006 12.7456 7.21179 12.5467L4.22702 9.69389C4.14452 9.61498 4.07909 9.52131 4.03446 9.41823C3.98983 9.31516 3.96688 9.20469 3.96693 9.09313C3.96697 8.98158 3.99 8.87112 4.0347 8.76808C4.0794 8.66503 4.1449 8.57141 4.22746 8.49255C4.31002 8.4137 4.40802 8.35116 4.51587 8.30851C4.62371 8.26586 4.73929 8.24392 4.85601 8.24396C4.97272 8.244 5.08829 8.26601 5.1961 8.30874C5.30392 8.35147 5.40187 8.41407 5.48437 8.49298L7.10871 10.0455V2.54789H8.88589Z"
                                          fill="white"/>
									</svg>
									<span>[[${md.downloadCount}]]</span>
								</span>
								<span class="icon" id="md-icon">
									<th:block th:if="${md.likeTo == 1}">
									<svg width="16" height="14" viewBox="0 0 16 14" fill="none"
                                         xmlns="http://www.w3.org/2000/svg">
										<path d="M8.40374 1.14511C8.17373 1.34511 7.82073 1.34511 7.59173 1.14511C5.80971 -0.404898 3.16169 -0.462898 1.34268 1.47411C-2.64136 6.51912 3.14269 10.9711 6.95772 13.6691C7.2618 13.8844 7.62518 14 7.99773 14C8.37029 14 8.73366 13.8844 9.03774 13.6691C12.8808 10.9581 18.6378 6.51912 14.6528 1.47411C12.8348 -0.462898 10.1848 -0.404898 8.40274 1.14511"
                                              fill="red"/>
									</svg>
									</th:block>
									<th:block th:unless="${md.likeTo == 1}">
									<svg width="16" height="14" viewBox="0 0 16 14" fill="none"
                                         xmlns="http://www.w3.org/2000/svg">
										<path d="M8.40374 1.14511C8.17373 1.34511 7.82073 1.34511 7.59173 1.14511C5.80971 -0.404898 3.16169 -0.462898 1.34268 1.47411C-2.64136 6.51912 3.14269 10.9711 6.95772 13.6691C7.2618 13.8844 7.62518 14 7.99773 14C8.37029 14 8.73366 13.8844 9.03774 13.6691C12.8808 10.9581 18.6378 6.51912 14.6528 1.47411C12.8348 -0.462898 10.1848 -0.404898 8.40274 1.14511"
                                              fill="white"/>
									</svg>
									</th:block>
									<span>[[${md.likeCount}]]</span>
								</span>
							</span>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <section class="section">
        <h2 class="section-title">탑 크리에이터 추천</h2>
        <div class="creator-grid top">
            <div class="creator-card" th:each="l, rank : ${ulist}">
                <input type="hidden" th:value="${l.userNo}">
                <div class="creator-header">
                    <div class="creator_profile_wrap">
                        <div class="creator_profile">
                            <th:block th:if="${l.userProfile == null}">
                                <img src="/img/testProfile.jpg" class="creator-avatar" alt="기본 프로필 이미지"/>
                            </th:block>
                            <th:block th:unless="${l.userProfile == null}">
                                <img th:src="${l.userProfile}" class="creator-avatar" alt="creator_profile"/>
                            </th:block>
                        </div>
                        <div class="verified-badge_wrap">
                            <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                      d="M7.88965 0.873047C8.4502 0.314453 9.20898 0 10 0C10.2432 0 10.4854 0.03125 10.7207 0.0878906C10.8643 0.123047 11.0049 0.169922 11.1426 0.226562C11.5039 0.376953 11.833 0.597656 12.1104 0.875L13.0029 1.76758C13.0596 1.82227 13.1221 1.87109 13.1885 1.91211C13.3408 2.00391 13.5176 2.05469 13.6992 2.05664H14.9609C15.4102 2.05664 15.8496 2.1582 16.2471 2.34766C16.5498 2.49219 16.8291 2.6875 17.0713 2.92969C17.3154 3.17383 17.5137 3.45703 17.6592 3.76367C17.8457 4.16016 17.9453 4.59375 17.9453 5.03906V6.30273C17.9463 6.5625 18.0498 6.8125 18.2334 6.99805L19.126 7.89062C19.3955 8.16016 19.6074 8.47656 19.7559 8.82031C19.915 9.18945 20 9.58984 20 10.002C20 10.793 19.6855 11.5508 19.126 12.1113L18.2334 13.0039C18.1553 13.082 18.0918 13.1719 18.0439 13.2695C17.9795 13.4023 17.9453 13.5488 17.9453 13.6992V14.9629C17.9453 15.7539 17.6309 16.5117 17.0713 17.0723C16.5117 17.6309 15.752 17.9453 14.9609 17.9453H13.6992C13.4385 17.9473 13.1885 18.0508 13.0029 18.2344L12.1104 19.127C11.5508 19.6875 10.791 20.002 10 20.002C9.20898 20.002 8.44922 19.6875 7.88965 19.127L6.99707 18.2344C6.8125 18.0508 6.56152 17.9453 6.30078 17.9453H5.03906C4.24805 17.9453 3.48828 17.6309 2.92871 17.0723C2.36914 16.5117 2.05469 15.7539 2.05469 14.9629V13.6992C2.05371 13.4395 1.9502 13.1895 1.7666 13.0039L0.874023 12.1113C0.314453 11.5508 0 10.793 0 10.002C0 9.20898 0.314453 8.45117 0.874023 7.89062L1.7666 6.99805C1.88477 6.87891 1.96973 6.73242 2.01562 6.57422C2.04102 6.48633 2.05469 6.39453 2.05469 6.30273V5.03906C2.05469 4.64844 2.13184 4.25977 2.28223 3.89844C2.43164 3.53516 2.65137 3.20703 2.92871 2.92969C3.20605 2.65234 3.53516 2.43164 3.89746 2.28125C4.25977 2.13281 4.64844 2.05469 5.04004 2.05469H6.30078C6.56152 2.05273 6.81152 1.94922 6.99707 1.76758L7.88965 0.873047Z"
                                      fill="#8137E9"/>
                            </svg>
                            <div class="creator-content">[[${rank.index + 1}]]</div>
                        </div>
                    </div>
                    <div class="creator-info">
                        <h3>[[${l.userNickname}]]</h3>
                        <span><svg width="14" height="12" viewBox="0 0 14 12" fill="none"
                                   xmlns="http://www.w3.org/2000/svg">
								<path d="M4.20042 5.60056C4.9431 5.60056 5.65536 5.30553 6.18052 4.78038C6.70567 4.25522 7.0007 3.54296 7.0007 2.80028C7.0007 2.0576 6.70567 1.34534 6.18052 0.820183C5.65536 0.295029 4.9431 0 4.20042 0C3.45774 0 2.74548 0.295029 2.22032 0.820183C1.69517 1.34534 1.40014 2.0576 1.40014 2.80028C1.40014 3.54296 1.69517 4.25522 2.22032 4.78038C2.74548 5.30553 3.45774 5.60056 4.20042 5.60056ZM10.501 5.60056C11.0581 5.60056 11.5923 5.37929 11.9861 4.98542C12.38 4.59156 12.6013 4.05736 12.6013 3.50035C12.6013 2.94334 12.38 2.40914 11.9861 2.01528C11.5923 1.62141 11.0581 1.40014 10.501 1.40014C9.94404 1.40014 9.40984 1.62141 9.01598 2.01528C8.62211 2.40914 8.40084 2.94334 8.40084 3.50035C8.40084 4.05736 8.62211 4.59156 9.01598 4.98542C9.40984 5.37929 9.94404 5.60056 10.501 5.60056ZM1.75017 7.0007C0.784078 7.0007 0 7.78478 0 8.75088C0 8.75088 0 11.9012 4.20042 11.9012C7.52995 11.9012 8.22022 9.92139 8.36304 9.10091C8.40084 8.88669 8.40084 8.75088 8.40084 8.75088C8.40084 7.78478 7.61676 7.0007 6.65067 7.0007H1.75017ZM9.79538 9.24092C9.79258 9.29693 9.78698 9.3632 9.77858 9.43974C9.70132 10.017 9.50076 10.571 9.19052 11.0639C9.56156 11.1493 9.9942 11.2011 10.4997 11.2011C14 11.2011 14 8.75088 14 8.75088C14 7.78478 13.2159 7.0007 12.2498 7.0007H9.26893C9.60496 7.50195 9.79958 8.10261 9.79958 8.75088V9.10091L9.79538 9.24092Z"
                                      fill="#6F757D"/>
							</svg> <span class="subscriber_count" onclick="location.herf=''">[[${l.subscriber}]]</span></span>
                    </div>
                    <button class="subscribe-button" th:text="${l.isSubscribed == 1 ? '-' : '+'}"></button>
                </div>
            </div>
        </div>
    </section>

    <section class="section">
        <h2 class="section-title">탑 템플릿 리스트</h2>
        <div class="template-grid" id="template-grid-wrap-top">
            <div class="template-card" th:each="c, rank : ${clist}">
                <input type="hidden" th:value="${c.contentNo}">
                <input type="hidden" th:value="${c.menuNo}">
                <div class="template-details">
                    <div class="template-image"></div>
                    <div class="overlay"></div>
                    <div class="content_wrap">
							<span class="content_title_wrap">
								<div class="template-title">[[${c.contentTitle}]]</div>
								<div class="template-writer">[[${c.userNickName}]]</div>
							</span>
                        <span class="icon_wrap">
								<span class="icon">
									<svg width="16" height="17" viewBox="0 0 16 17" fill="none"
                                         xmlns="http://www.w3.org/2000/svg">
									<path fill-rule="evenodd" clip-rule="evenodd"
                                          d="M7.9973 0C7.76163 0 7.53562 0.0894793 7.36897 0.248754C7.20233 0.408028 7.10871 0.62405 7.10871 0.849298V2.54789H1.77718C1.30584 2.54789 0.853809 2.72685 0.520523 3.0454C0.187238 3.36395 0 3.79599 0 4.24649V15.2874C0 15.7379 0.187238 16.1699 0.520523 16.4885C0.853809 16.807 1.30584 16.986 1.77718 16.986H14.2174C14.6888 16.986 15.1408 16.807 15.4741 16.4885C15.8074 16.1699 15.9946 15.7379 15.9946 15.2874V4.24649C15.9946 3.79599 15.8074 3.36395 15.4741 3.0454C15.1408 2.72685 14.6888 2.54789 14.2174 2.54789H8.88589V0.849298C8.88589 0.62405 8.79227 0.408028 8.62563 0.248754C8.45899 0.0894793 8.23297 0 7.9973 0ZM8.88589 2.54789V10.0455L10.5102 8.49298C10.6768 8.33362 10.9029 8.24404 11.1386 8.24396C11.3743 8.24388 11.6004 8.3333 11.7671 8.49255C11.9339 8.6518 12.0276 8.86784 12.0277 9.09313C12.0278 9.31843 11.9342 9.53452 11.7676 9.69389L8.78193 12.5467C8.57365 12.7456 8.29128 12.8573 7.99686 12.8573C7.70244 12.8573 7.42006 12.7456 7.21179 12.5467L4.22702 9.69389C4.14452 9.61498 4.07909 9.52131 4.03446 9.41823C3.98983 9.31516 3.96688 9.20469 3.96693 9.09313C3.96697 8.98158 3.99 8.87112 4.0347 8.76808C4.0794 8.66503 4.1449 8.57141 4.22746 8.49255C4.31002 8.4137 4.40802 8.35116 4.51587 8.30851C4.62371 8.26586 4.73929 8.24392 4.85601 8.24396C4.97272 8.244 5.08829 8.26601 5.1961 8.30874C5.30392 8.35147 5.40187 8.41407 5.48437 8.49298L7.10871 10.0455V2.54789H8.88589Z"
                                          fill="white"/>
									</svg>
									<span>[[${c.downloadCount}]]</span>
								</span>
								<span class="icon" id="md-icon">
									<th:block th:if="${c.likeTo == 1}">
									<svg width="16" height="14" viewBox="0 0 16 14" fill="none"
                                         xmlns="http://www.w3.org/2000/svg">
										<path d="M8.40374 1.14511C8.17373 1.34511 7.82073 1.34511 7.59173 1.14511C5.80971 -0.404898 3.16169 -0.462898 1.34268 1.47411C-2.64136 6.51912 3.14269 10.9711 6.95772 13.6691C7.2618 13.8844 7.62518 14 7.99773 14C8.37029 14 8.73366 13.8844 9.03774 13.6691C12.8808 10.9581 18.6378 6.51912 14.6528 1.47411C12.8348 -0.462898 10.1848 -0.404898 8.40274 1.14511"
                                              fill="red"/>
									</svg>
									</th:block>
									<th:block th:unless="${c.likeTo == 1}">
									<svg width="16" height="14" viewBox="0 0 16 14" fill="none"
                                         xmlns="http://www.w3.org/2000/svg">
										<path d="M8.40374 1.14511C8.17373 1.34511 7.82073 1.34511 7.59173 1.14511C5.80971 -0.404898 3.16169 -0.462898 1.34268 1.47411C-2.64136 6.51912 3.14269 10.9711 6.95772 13.6691C7.2618 13.8844 7.62518 14 7.99773 14C8.37029 14 8.73366 13.8844 9.03774 13.6691C12.8808 10.9581 18.6378 6.51912 14.6528 1.47411C12.8348 -0.462898 10.1848 -0.404898 8.40274 1.14511"
                                              fill="white"/>
									</svg>
									</th:block>
									<span>[[${c.likeCount}]]</span>
								</span>
							</span>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
<div th:replace="~{views/common/footer :: footer}"></div>
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script th:inline="javascript">
    const loginUser = /*[[${session.loginUser}]]*/'loginUser';
    const creatorList = document.querySelector('.creator-grid.top');

    var showAlert = "[[${showAlert}]]";
    if (showAlert && showAlert.trim() === "true") {
        alert("결제일이 지났습니다.");
    }

    const topList = document.getElementById('template-grid-wrap-top');
    const mdList = document.getElementById('template-grid-wrap');

    window.onload = () => {
        if (topList) listPlay(topList);
        if (mdList) listPlay(mdList);
        if (creatorList) creatorPlay(creatorList);
    }

    // template 목록을 처리하는 함수
    function listPlay(list) {
        [...list.children].forEach((template) => {
            const thumbnail = template.querySelector('.template-image');
            const contentNo = template.querySelector('input[type=hidden]').value;
            const menuNo = template.querySelector('input[type=hidden]:nth-of-type(2)').value;

            // --- 썸네일 불러오기 ---
            fetch("/board/select-thumbnail/" + contentNo)
                .then(response => {
                    if (!response.ok) throw new Error('Network response was not ok');
                    return response.json();
                })
                .then(data => {
                    if (!data || !data.thumbnail) {
                        console.error("썸네일 데이터 없음:", contentNo);
                        return;
                    }

                    if (menuNo == 1 || menuNo == 5) {
                        const video = document.createElement('video');
                        video.muted = true;
                        video.loop = true;
                        const source = document.createElement("source");
                        source.type = "video/mp4";
                        source.src = data.thumbnail;
                        video.appendChild(source);
                        thumbnail.innerHTML = ''; // 기존 내용 비우기
                        thumbnail.appendChild(video);

                        template.addEventListener('mouseenter', () => video.play().catch(e => console.log("비디오 재생 오류:", e)));
                        template.addEventListener('mouseleave', () => {
                            video.pause();
                            video.currentTime = 0;
                        });
                    } else if (menuNo == 4 || menuNo == 6 || menuNo == 7 || menuNo == 2) {
                        const img = document.createElement('img');
                        img.src = data.thumbnail;
                        thumbnail.innerHTML = ''; // 기존 내용 비우기
                        thumbnail.appendChild(img);
                    } else {
                        const img = document.createElement('img');
                        img.src = "/img/sound-effects.png";
                        thumbnail.innerHTML = ''; // 기존 내용 비우기
                        thumbnail.appendChild(img);
                    }
                })
                .catch(err => console.error("썸네일 로딩 fetch 에러:", err));


            // --- 컨텐츠 클릭 이벤트 (상세 페이지 이동) ---
            template.addEventListener('click', function (event) {
                let menuName = "";
                switch (menuNo) {
                    case "1": menuName = "video-templates"; break;
                    case "2": menuName = "music"; break;
                    case "3": menuName = "sound-effect"; break;
                    case "4": menuName = "graphic-templates"; break;
                    case "5": menuName = "stock-video"; break;
                    case "6": menuName = "photo"; break;
                    case "7": menuName = "font"; break;
                }
                if(menuName) location.href = "/board/" + menuName + "/" + contentNo;
            });

            // --- 좋아요 버튼 이벤트 ---
            const likeButton = template.querySelector('#md-icon');
            if (likeButton) {
                likeButton.addEventListener('click', function (event) {
                    event.stopPropagation();
                    if (!loginUser) {
                        alert('로그인 후 이용해주세요');
                        return;
                    }

                    const svgIcon = likeButton.querySelector('svg');
                    const isLiked = svgIcon.getAttribute('fill') === 'red';
                    const method = isLiked ? 'delete' : 'put';
                    const likeCountSpan = likeButton.querySelector('span');

                    fetch('/board/like', {
                        method: method,
                        headers: {'content-type': 'application/json; charset=UTF-8'},
                        body: JSON.stringify({ contentNo: contentNo })
                    })
                        .then(response => response.json())
                        .then(data => {
                            if (data === 1) {
                                if (isLiked) {
                                    svgIcon.setAttribute('fill', 'white');
                                    likeCountSpan.innerText = parseInt(likeCountSpan.innerText) - 1;
                                } else {
                                    svgIcon.setAttribute('fill', 'red');
                                    likeCountSpan.innerText = parseInt(likeCountSpan.innerText) + 1;
                                }
                            }
                        });
                });
            }
        });
    }

    // 크리에이터 목록을 처리하는 함수
    function creatorPlay(list) {
        [...list.children].forEach((creator) => {
            const createrNo = creator.querySelector('input').value;
            const subscribeBtn = creator.querySelector('.subscribe-button');

            creator.addEventListener('click', function () {
                const count = this.querySelector('.subscriber_count').innerText;
                location.href = `/users/createrPage?createrNo=${createrNo}&subscriberCount=${count}`;
            });

            if (subscribeBtn) {
                subscribeBtn.addEventListener('click', function (event) {
                    event.stopPropagation();
                    if (!loginUser) {
                        alert('로그인 후 이용해주세요');
                        return;
                    }
                    const isCancel = subscribeBtn.innerText === "-";
                    fetch("/users/post/updateSubscribe", {
                        method: "POST",
                        headers: {'content-type': 'application/json; charset=UTF-8'},
                        body: JSON.stringify({ createrNo: createrNo, isCancel: isCancel })
                    })
                        .then(response => response.json())
                        .then(data => {
                            if (data === 1) {
                                subscribeBtn.innerText = isCancel ? "+" : "-";
                            }
                        });

                });
            }
        });
    }

    const mySwiper = new Swiper('.mySwiper', {
        loop: true,
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
    });
</script>
</body>
</html>