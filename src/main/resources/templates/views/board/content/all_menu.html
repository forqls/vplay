<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link href="/css/topbar.css" rel="stylesheet" type="text/css">
<link href="/css/board/all_menu.css" rel="stylesheet" type="text/css">
</head>
<body>
	<div th:replace="~{views/common/topbar :: topbar}"></div>
	
	    <!-- 메인 컨텐츠 -->
    <main>
        <!-- 히어로 섹션 -->
        <section class="hero">
            <div class="hero-content">
                <h2>수천개의 아티스트 제작 에셋을 만나보세요!</h2>
                <p>영상, 오디오, 사진, 그래픽, 폰트 등 창작자들을 위한 프리미엄 콘텐츠 모든 것이 여기에 모여있습니다.</p>
                <p>모든 에셋들 무제한 다운로드 크리에이터의 작업이 완벽해질 것입니다.</p>
            </div>
        </section>

        <!-- 비디오 템플릿 섹션 -->
        <section class="content-section">
            <div class="section-header">
                <h2>비디오 템플릿</h2>
                <a href="/board/video-template-list" class="view-all">view all</a>
            </div>
            <div class="content-grid video-template-list">
                <div class="content-card dark" th:each="v : ${videoTemplateList}">
                	<input type="hidden" th:value="${v.contentNo}">
                    <div class="card-image">
                        <img src="/img/simple.jpg" alt="Big Game Grunge">
                    </div>
                    <div class="card-info">
                        <h3>[[${v.contentTitle}]]</h3>
                        <p>[[${v.userNickName}]]</p>
                    </div>
                    <div class="card-actions">
                    	<span>
	                    	<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C7.76425 0 7.53816 0.0895533 7.37146 0.248959C7.20476 0.408365 7.11111 0.624566 7.11111 0.85V2.55H1.77778C1.30628 2.55 0.854097 2.72911 0.520699 3.04792C0.187301 3.36673 0 3.79913 0 4.25V15.3C0 15.7509 0.187301 16.1833 0.520699 16.5021C0.854097 16.8209 1.30628 17 1.77778 17H14.2222C14.6937 17 15.1459 16.8209 15.4793 16.5021C15.8127 16.1833 16 15.7509 16 15.3V4.25C16 3.79913 15.8127 3.36673 15.4793 3.04792C15.1459 2.72911 14.6937 2.55 14.2222 2.55H8.88889V0.85C8.88889 0.624566 8.79524 0.408365 8.62854 0.248959C8.46184 0.0895533 8.23575 0 8 0ZM8.88889 2.55V10.0538L10.5138 8.5C10.6805 8.34051 10.9066 8.25086 11.1424 8.25078C11.3781 8.2507 11.6043 8.34019 11.7711 8.49958C11.9379 8.65896 12.0317 8.87517 12.0317 9.10065C12.0318 9.32613 11.9382 9.54241 11.7716 9.7019L8.78489 12.5571C8.57654 12.7561 8.29407 12.8679 7.99956 12.8679C7.70504 12.8679 7.42257 12.7561 7.21422 12.5571L4.22844 9.7019C4.14592 9.62293 4.08046 9.52918 4.03582 9.42602C3.99118 9.32286 3.96822 9.2123 3.96826 9.10065C3.96831 8.989 3.99134 8.87846 4.03606 8.77533C4.08078 8.67219 4.1463 8.57849 4.22889 8.49958C4.31148 8.42066 4.40951 8.35807 4.51739 8.31538C4.62527 8.27269 4.74089 8.25074 4.85765 8.25078C4.9744 8.25082 5.09 8.27285 5.19786 8.31561C5.30571 8.35837 5.40369 8.42103 5.48622 8.5L7.11111 10.0538V2.55H8.88889Z" fill="white"/>
							</svg>
							<a>[[${v.downloadCount}]]</a>
						</span>
						<span>
							<th:block th:if="${v.likeTo == 1}">
	                        <svg width="16" height="14" viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M8.40374 1.14511C8.17373 1.34511 7.82073 1.34511 7.59173 1.14511C5.80971 -0.404898 3.16169 -0.462898 1.34268 1.47411C-2.64136 6.51912 3.14269 10.9711 6.95772 13.6691C7.2618 13.8844 7.62518 14 7.99773 14C8.37029 14 8.73366 13.8844 9.03774 13.6691C12.8808 10.9581 18.6378 6.51912 14.6528 1.47411C12.8348 -0.462898 10.1848 -0.404898 8.40274 1.14511" fill="red"/>
							</svg>
							</th:block>
							<th:block th:unless="${v.likeTo == 1}">
	                        <svg width="16" height="14" viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M8.40374 1.14511C8.17373 1.34511 7.82073 1.34511 7.59173 1.14511C5.80971 -0.404898 3.16169 -0.462898 1.34268 1.47411C-2.64136 6.51912 3.14269 10.9711 6.95772 13.6691C7.2618 13.8844 7.62518 14 7.99773 14C8.37029 14 8.73366 13.8844 9.03774 13.6691C12.8808 10.9581 18.6378 6.51912 14.6528 1.47411C12.8348 -0.462898 10.1848 -0.404898 8.40274 1.14511" fill="white"/>
							</svg>
							</th:block>
							<a>[[${v.likeCount}]]</a>
						</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- 음악 섹션 -->
        <section class="content-section">
            <div class="section-header">
                <h2>음악</h2>
                <a href="/board/music-list" class="view-all">view all</a>
            </div>
            <div class="content-grid">
                <div class="music-card" th:each="m : ${musicList}">
                	<input type="hidden" th:value="${m.contentNo}">
                    <div class="music-label">[[${m.contentTitle}]]</div>
                    <div class="music-image purple"></div>
                </div>
            </div>
        </section>

        <!-- 효과음 섹션 -->
        <section class="content-section">
            <div class="section-header">
                <h2>효과음</h2>
                <a href="/board/sound-effects-list" class="view-all">view all</a>
            </div>
            <div class="content-grid">
                <div class="sound-card" th:each="s : ${soundEffectsList}">
                	<input type="hidden" th:value="${s.contentNo}">
                    <div class="play-button"></div>
                    <div class="sound-info">
                        <h3>[[${s.contentTitle}]]</h3>
                        <p>[[${s.userNickName}]]</p>
                    </div>
                    <div class="waveform"></div>
                    <div class="sound-actions">
                        <span class="duration">0:12</span>
                        <div class="action-buttons">
                            <button class="action-btn"></button>
                            <button class="action-btn"></button>
                            <button class="action-btn red"></button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 그래픽 템플릿 섹션 -->
        <section class="content-section">
            <div class="section-header">
                <h2>그래픽 템플릿</h2>
                <a href="/board/graphic-template-list" class="view-all">view all</a>
            </div>
            <div class="content-grid">
                <div class="content-card dark" th:each="g : ${graphicTemplateList}">
                	<input type="hidden" th:value="${g.contentNo}">
                    <div class="card-image">
                        <!-- Empty placeholder -->
                    </div>
                    <div class="card-info">
                        <h3>[[${g.contentTitle}]]</h3>
                        <p>[[${g.userNickName}]]</p>
                    </div>
                    <div class="card-actions">
                        <button class="action-btn"></button>
                        <button class="action-btn"></button>
                    </div>
                </div>
            </div>
        </section>

        <!-- 스톡 비디오 섹션 -->
        <section class="content-section">
            <div class="section-header">
                <h2>스톡 비디오</h2>
                <a href="/board/stock-video-list" class="view-all">view all</a>
            </div>
            <div class="content-grid">
                <div class="content-card dark" th:each="st : ${stockVideoList}">
               		<input type="hidden" th:value="${st.contentNo}">
                    <div class="card-image">
                        <!-- Empty placeholder -->
                    </div>
                    <div class="card-info">
                        <h3>[[${st.contentTitle}]]</h3>
                        <p>[[${st.userNickName}]]</p>
                    </div>
                    <div class="card-actions">
                        <button class="action-btn"></button>
                        <button class="action-btn"></button>
                    </div>
                </div>
            </div>
        </section>

        <!-- 사진 섹션 -->
        <section class="content-section">
            <div class="section-header">
                <h2>사진</h2>
                <a href="/board/photo-list" class="view-all">view all</a>
            </div>
            <div class="content-grid">
                <div class="content-card dark" th:each="p : ${photosList}">
                	<input type="hidden" th:value="${p.contentNo}">
                    <div class="card-image">
                        <!-- Empty placeholder -->
                    </div>
                    <div class="card-info">
                        <h3>[[${p.contentTitle}]]</h3>
                        <p>[[${p.userNickName}]]</p>
                    </div>
                    <div class="card-actions">
                        <button class="action-btn"></button>
                        <button class="action-btn"></button>
                    </div>
                </div>
            </div>
        </section>

        <!-- 폰트 섹션 -->
        <section class="content-section">
            <div class="section-header">
                <h2>폰트</h2>
                <a href="/board/font-list" class="view-all">view all</a>
            </div>
            <div class="content-grid">
                <div class="music-card" th:each="f : ${fontList}">
                	<input type="hidden" th:value="${f.contentNo}">
                    <div class="music-label">[[${f.contentTitle}]]</div>
                    <div class="font-image orange">
                        <span class="font-sample">Gendy</span>
                    </div>
                </div>
            </div>
        </section>
    </main>
	<script th:inline="javascript">
		window.onload = () =>{
			
			const loginUser = /*[[${session.loginUser}]]*/'loginUser';
			
			//비디오 메뉴 기능
			const videoMenu = document.getElementsByClassName("content-grid")[0];
			[...videoMenu.children].map((video, index, array) =>{
				const like = video.children[3].children[1].children[0];
				const view = (like.nextElementSibling);
				
				const contentNo = video.children[0].value
				video.addEventListener('click', function(){
					location.href = "/board/video-templates/" + contentNo;
				})
				
				like.addEventListener('click', function(event){
					if(loginUser != null){
						if(this.children[0].getAttribute("fill") == 'white'){
							fetch('/board/like', {
								method : 'put',
								headers : {'content-type':'application/json; charset=UTF-8'},
								body: JSON.stringify({
									contentNo: contentNo
				    			})
							})
							.then(response => response.json())
							.then(data =>{
								this.children[0].setAttribute("fill", "red");
								view.innerText = Number((view.innerText)) + 1;
							})
						}else if(this.children[0].getAttribute("fill") == 'red'){
							fetch('/board/like', {
								method : 'delete',
								headers : {'content-type':'application/json; charset=UTF-8'},
								body: JSON.stringify({
									contentNo: contentNo
				    			})
							})
							.then(response => response.json())
							.then(data =>{
								this.children[0].setAttribute("fill", "white");
								view.innerText = Number((view.innerText)) - 1;
							})
						}
					}else{
						alert('로그인 후 이용해주세요');
					}
					event.stopPropagation();
				})
				
			})
			
			//음악 메뉴 기능
			const musicMenu = document.getElementsByClassName("content-grid")[1];
			[...musicMenu.children].map((music, index, array)=>{
				
				const contentNo = music.children[0].value
				music.addEventListener('click', function(){
					location.href = "/board/music/" + contentNo;
				})
			})
			
			//효과음 메뉴 기능
			const soundEffectMenu = document.getElementsByClassName("content-grid")[2];
			[...soundEffectMenu.children].map((sound, index, array)=>{
				
				const contentNo = sound.children[0].value
				sound.addEventListener('click', function(){
					location.href = "/board/sound-effect/" + contentNo;
				})
			})
			
			//그래픽 템플릿 기능
			const graphicTemplateMenu = document.getElementsByClassName("content-grid")[3];
			[...graphicTemplateMenu.children].map((graphic, index, array)=>{
				console.log(graphic);
				const contentNo = graphic.children[0].value
				graphic.addEventListener('click', function(){
					location.href = "/board/graphic-templates/" + contentNo;
				})
			})
			
			//스톡 비디오 기능
			const stockVideoMenu = document.getElementsByClassName("content-grid")[4];
			[...stockVideoMenu.children].map((stockV, index, array)=>{
				const contentNo = stockV.children[0].value
				stockV.addEventListener('click', function(){
					location.href = "/board/stock-video/" + contentNo;
				})
			})
			
			//스톡 비디오 기능
			const photoMenu = document.getElementsByClassName("content-grid")[5];
			[...photoMenu.children].map((photo, index, array)=>{
				const contentNo = photo.children[0].value
				photo.addEventListener('click', function(){
					location.href = "/board/photo/" + contentNo;
				})
			})
			
			//폰트 기능
			const fontMenu = document.getElementsByClassName("content-grid")[6];
			[...fontMenu.children].map((font, index, array)=>{
				const contentNo = font.children[0].value
				font.addEventListener('click', function(){
					location.href = "/board/font/" + contentNo;
				})
			})
			
		}
	</script>
</body>
</html>