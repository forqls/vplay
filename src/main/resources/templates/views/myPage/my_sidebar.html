<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
<title>Sidebar</title>
</head>
<body>
	<div class="sidebar_wrap">
		<div class="sidebar">
			<div class="profile">
				<div class="profile-image">
					<th:block th:if="${session.loginUser.userProfile == null}">
						<img src="/img/testProfile.jpg" width="100%" height="100%">
					</th:block>
					<th:block th:if="${session.loginUser.userProfile != null}">
						<img th:src="${session.loginUser.userProfile}" width="100%" height="100%">
					</th:block>
					<input type="file" accept="image/*" style="display: none;" onchange="loadImage(this);">
					<ul class="dropdown-menu">
						<li><button>변경</button></li>
						<li><button>삭제</button></li>
					</ul>
				</div>
				<h4>[[${session.loginUser.userNickname}]]</h4>
				<p style="margin-top: 15px">[[${session.loginUser.userComment}]]</p>
				<span class="follower"><object type="image/svg+xml" data="/img/subscribers.svg" class="svg-icon"></object></span>
			</div>
			<nav class="menu-list">
				<a id="myProjects" class="menu-item" onclick="location.href='/users/my_projects'"> <span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
					<path fill-rule="evenodd" clip-rule="evenodd"
								d="M0.0559999 2.6064C-5.58794e-08 2.9008 0 3.2544 0 3.96V9.6C0 12.6168 -1.19209e-07 14.1256 0.9376 15.0624C1.8752 15.9992 3.3832 16 6.4 16H9.6C12.6168 16 14.1256 16 15.0624 15.0624C15.9992 14.1248 16 12.6168 16 9.6V7.8384C16 5.7328 16 4.6792 15.384 3.9952C15.3275 3.93208 15.2677 3.87199 15.2048 3.8152C14.5208 3.2 13.4672 3.2 11.3616 3.2H11.0624C10.14 3.2 9.6784 3.2 9.248 3.0776C9.01181 3.01008 8.78417 2.91559 8.5696 2.796C8.1792 2.5792 7.8528 2.252 7.2 1.6L6.76 1.16C6.5408 0.9408 6.432 0.832 6.3168 0.736C5.82133 0.325312 5.21355 0.0735551 4.5728 0.0136C4.424 -3.25963e-08 4.2688 0 3.96 0C3.2536 0 2.9008 -5.58794e-08 2.6064 0.0559999C1.97427 0.175379 1.3928 0.482509 0.937845 0.937321C0.48289 1.39213 0.175577 1.97431 0.0559999 2.6064ZM8.2 6.4C8.2 6.24087 8.26321 6.08826 8.37574 5.97574C8.48826 5.86321 8.64087 5.8 8.8 5.8H12.8C12.9591 5.8 13.1117 5.86321 13.2243 5.97574C13.3368 6.08826 13.4 6.24087 13.4 6.4C13.4 6.55913 13.3368 6.71174 13.2243 6.82426C13.1117 6.93679 12.9591 7 12.8 7H8.8C8.64087 7 8.48826 6.93679 8.37574 6.82426C8.26321 6.71174 8.2 6.55913 8.2 6.4Z"
								fill="#6F757D" />
					</svg>
				</span> My Projects
				</a> <a id="myFavorites" class="menu-item" onclick="location.href='/users/my_favorites'"> <span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="14" viewBox="0 0 16 14" fill="currentColor">
               			<path d="M8.40391 1.1451C8.17391 1.3451 7.82091 1.3451 7.59191 1.1451C5.80991 -0.404897 3.16191 -0.462897 1.34291 1.4741C-2.64109 6.5191 3.14291 10.9711 6.95791 13.6691C7.26198 13.8844 7.62536 14 7.99791 14C8.37046 14 8.73384 13.8844 9.03791 13.6691C12.8809 10.9581 18.6379 6.5191 14.6529 1.4741C12.8349 -0.462897 10.1849 -0.404897 8.40291 1.1451" fill="#6F757D" />
               		</svg>
				</span> My Favorites
				</a> <a id="myDownloads" class="menu-item" onclick="location.href='/users/my_downloads'"> <span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="18" viewBox="0 0 16 18" fill="currentColor">
					<path fill-rule="evenodd" clip-rule="evenodd"
								d="M8 0C7.76425 0 7.53816 0.0936505 7.37146 0.260349C7.20476 0.427048 7.11111 0.653141 7.11111 0.888889V2.66667H1.77778C1.30628 2.66667 0.854097 2.85397 0.520699 3.18737C0.187301 3.52076 0 3.97295 0 4.44444V16C0 16.4715 0.187301 16.9237 0.520699 17.2571C0.854097 17.5905 1.30628 17.7778 1.77778 17.7778H14.2222C14.6937 17.7778 15.1459 17.5905 15.4793 17.2571C15.8127 16.9237 16 16.4715 16 16V4.44444C16 3.97295 15.8127 3.52076 15.4793 3.18737C15.1459 2.85397 14.6937 2.66667 14.2222 2.66667H8.88889V0.888889C8.88889 0.653141 8.79524 0.427048 8.62854 0.260349C8.46184 0.0936505 8.23575 0 8 0ZM8.88889 2.66667V10.5138L10.5138 8.88889C10.6805 8.7221 10.9066 8.62835 11.1424 8.62826C11.3781 8.62818 11.6043 8.72177 11.7711 8.88844C11.9379 9.05512 12.0317 9.28122 12.0317 9.51702C12.0318 9.75281 11.9382 9.97898 11.7716 10.1458L8.78489 13.1316C8.57654 13.3397 8.29407 13.4567 7.99956 13.4567C7.70504 13.4567 7.42257 13.3397 7.21422 13.1316L4.22844 10.1458C4.14592 10.0632 4.08046 9.96516 4.03582 9.85728C3.99118 9.74939 3.96822 9.63377 3.96826 9.51702C3.96831 9.40026 3.99134 9.28466 4.03606 9.17681C4.08078 9.06896 4.1463 8.97097 4.22889 8.88844C4.31148 8.80592 4.40951 8.74046 4.51739 8.69582C4.62527 8.65118 4.74089 8.62822 4.85765 8.62826C4.9744 8.62831 5.09 8.65134 5.19786 8.69606C5.30571 8.74078 5.40369 8.8063 5.48622 8.88889L7.11111 10.5138V2.66667H8.88889Z"
								fill="#6F757D" />
					</svg>
				</span> My Downloads
				</a> <a id="myAccount" class="menu-item" onclick="location.href='/users/my_account'"> <span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="20" viewBox="0 0 16 20" fill="currentColor">
					  <path d="M8 10c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" fill="#6F757D" />
					</svg>
				</span> My Account
				</a> <a id="myPayments" class="menu-item" onclick="location.href='/users/my_payments'"> <span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="13" viewBox="0 0 16 13" fill="currentColor">
					<path d="M2.57143 0C1.88944 0 1.23539 0.280153 0.753154 0.77883C0.270918 1.27751 0 1.95386 0 2.65909V3.54545H16V2.65909C16 1.95386 15.7291 1.27751 15.2468 0.77883C14.7646 0.280153 14.1106 0 13.4286 0H2.57143ZM0 10.3409V4.72727H16V10.3409C16 11.0461 15.7291 11.7225 15.2468 12.2212C14.7646 12.7198 14.1106 13 13.4286 13H2.57143C1.88944 13 1.23539 12.7198 0.753154 12.2212C0.270918 11.7225 0 11.0461 0 10.3409ZM10.8571 8.27273C10.7056 8.27273 10.5602 8.33498 10.4531 8.4458C10.3459 8.55662 10.2857 8.70692 10.2857 8.86364C10.2857 9.02036 10.3459 9.17066 10.4531 9.28147C10.5602 9.39229 10.7056 9.45455 10.8571 9.45455H12.5714C12.723 9.45455 12.8683 9.39229 12.9755 9.28147C13.0827 9.17066 13.1429 9.02036 13.1429 8.86364C13.1429 8.70692 13.0827 8.55662 12.9755 8.4458C12.8683 8.33498 12.723 8.27273 12.5714 8.27273H10.8571Z" fill="#6F757D" />
					</svg>
				</span> My Payments
				</a> <a id="myInquiry" class="menu-item" onclick="location.href='/users/my_inquiry'"> <span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
					<path fill-rule="evenodd" clip-rule="evenodd"
								d="M9.2 0C11.0035 0 12.7331 0.716427 14.0083 1.99167C15.2836 3.26692 16 4.99653 16 6.8C16 8.60347 15.2836 10.3331 14.0083 11.6083C12.7331 12.8836 11.0035 13.6 9.2 13.6H8.8V14.392C8.8 14.4982 8.77907 14.6033 8.73842 14.7014C8.69776 14.7995 8.63817 14.8886 8.56306 14.9636C8.48794 15.0387 8.39878 15.0982 8.30065 15.1387C8.20253 15.1793 8.09738 15.2001 7.9912 15.2C6.0232 15.1984 4.0296 14.5416 2.5168 13.1968C0.9904 11.8384 0.0016 9.82 0 7.2072V6.8C0 4.99653 0.716427 3.26692 1.99167 1.99167C3.26692 0.716427 4.99653 0 6.8 0H9.2ZM5.2 5.6C4.88174 5.6 4.57652 5.72643 4.35147 5.95147C4.12643 6.17652 4 6.48174 4 6.8C4 7.11826 4.12643 7.42348 4.35147 7.64853C4.57652 7.87357 4.88174 8 5.2 8C5.51826 8 5.82348 7.87357 6.04853 7.64853C6.27357 7.42348 6.4 7.11826 6.4 6.8C6.4 6.48174 6.27357 6.17652 6.04853 5.95147C5.82348 5.72643 5.51826 5.6 5.2 5.6ZM10.8 5.6C10.4817 5.6 10.1765 5.72643 9.95147 5.95147C9.72643 6.17652 9.6 6.48174 9.6 6.8C9.6 7.11826 9.72643 7.42348 9.95147 7.64853C10.1765 7.87357 10.4817 8 10.8 8C11.1183 8 11.4235 7.87357 11.6485 7.64853C11.8736 7.42348 12 7.11826 12 6.8C12 6.48174 11.8736 6.17652 11.6485 5.95147C11.4235 5.72643 11.1183 5.6 10.8 5.6Z"
								fill="#6F757D" />
					</svg>
				</span> My Inquiry
				</a> <a id="myCommission" class="menu-item" onclick="location.href='/users/my_commission'"> <span> <svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path
								d="M9.79396 0.291694C9.97391 0.112346 10.2154 0.00822094 10.4693 0.000466345C10.7233 -0.00728825 10.9707 0.0819096 11.1612 0.249943C11.3518 0.417977 11.4713 0.652246 11.4954 0.905169C11.5194 1.15809 11.4464 1.4107 11.291 1.61169L11.208 1.70569L10.794 2.11969H13.001C13.7662 2.11965 14.5025 2.41202 15.0592 2.93698C15.616 3.46194 15.9511 4.1798 15.996 4.94369L16.001 5.11969V12.2897C16.6681 12.5258 17.2303 12.9902 17.5883 13.6007C17.9463 14.2111 18.077 14.9285 17.9574 15.626C17.8377 16.3236 17.4754 16.9564 16.9345 17.4126C16.3935 17.8689 15.7087 18.1194 15.001 18.1197C14.3089 18.1199 13.6381 17.8809 13.1022 17.4431C12.5663 17.0054 12.1981 16.3958 12.0602 15.7177C11.9223 15.0395 12.023 14.3346 12.3454 13.7222C12.6677 13.1099 13.1918 12.6278 13.829 12.3577L14.001 12.2897V5.11969C14.0009 4.87476 13.911 4.63836 13.7482 4.45532C13.5855 4.27229 13.3612 4.15535 13.118 4.12669L13.001 4.11969H10.794L11.208 4.53369C11.3892 4.71324 11.495 4.95526 11.5036 5.21024C11.5123 5.46522 11.4232 5.71386 11.2545 5.90527C11.0858 6.09669 10.8504 6.2164 10.5963 6.2399C10.3423 6.2634 10.0889 6.18892 9.88796 6.03169L9.79396 5.94769L7.67296 3.82769C7.50036 3.65557 7.39658 3.42634 7.38111 3.18308C7.36564 2.93982 7.43956 2.69929 7.58896 2.50669L7.67296 2.41269L9.79296 0.291694H9.79396ZM3.00096 0.119694C3.69296 0.119475 4.36377 0.358497 4.89971 0.796262C5.43566 1.23403 5.80378 1.84361 5.94171 2.52173C6.07964 3.19986 5.9789 3.90481 5.65655 4.51715C5.3342 5.1295 4.81006 5.61157 4.17296 5.88169L4.00096 5.94969V12.2917C4.6667 12.5288 5.22739 12.9933 5.58426 13.6033C5.94112 14.2133 6.07126 14.9297 5.95174 15.6262C5.83223 16.3228 5.47073 16.9548 4.93093 17.4109C4.39113 17.867 3.70767 18.118 3.00096 18.1197C2.30895 18.1199 1.63814 17.8809 1.1022 17.4431C0.566256 17.0054 0.198132 16.3958 0.0602013 15.7177C-0.0777298 15.0395 0.0230148 14.3346 0.345365 13.7222C0.667715 13.1099 1.19185 12.6278 1.82896 12.3577L2.00096 12.2897V5.94869C1.33451 5.71205 0.773056 5.24764 0.415631 4.6374C0.0582054 4.02716 -0.072222 3.31029 0.0473574 2.61326C0.166937 1.91624 0.528839 1.28383 1.06922 0.827616C1.6096 0.371399 2.29375 0.120682 3.00096 0.119694Z"
								fill="#6F757D" />
					</svg>
				</span> My Commission
				</a> <a id="mySubscriptions" class="menu-item" onclick="location.href='/users/subscribe'"> <span> <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M4.20042 5.60056C4.9431 5.60056 5.65536 5.30553 6.18052 4.78038C6.70567 4.25522 7.0007 3.54296 7.0007 2.80028C7.0007 2.0576 6.70567 1.34534 6.18052 0.820183C5.65536 0.295029 4.9431 0 4.20042 0C3.45774 0 2.74548 0.295029 2.22032 0.820183C1.69517 1.34534 1.40014 2.0576 1.40014 2.80028C1.40014 3.54296 1.69517 4.25522 2.22032 4.78038C2.74548 5.30553 3.45774 5.60056 4.20042 5.60056ZM10.501 5.60056C11.0581 5.60056 11.5923 5.37929 11.9861 4.98542C12.38 4.59156 12.6013 4.05736 12.6013 3.50035C12.6013 2.94334 12.38 2.40914 11.9861 2.01528C11.5923 1.62141 11.0581 1.40014 10.501 1.40014C9.94404 1.40014 9.40984 1.62141 9.01598 2.01528C8.62211 2.40914 8.40084 2.94334 8.40084 3.50035C8.40084 4.05736 8.62211 4.59156 9.01598 4.98542C9.40984 5.37929 9.94404 5.60056 10.501 5.60056ZM1.75017 7.0007C0.784078 7.0007 0 7.78478 0 8.75088C0 8.75088 0 11.9012 4.20042 11.9012C7.52995 11.9012 8.22022 9.92139 8.36304 9.10091C8.40084 8.88669 8.40084 8.75088 8.40084 8.75088C8.40084 7.78478 7.61676 7.0007 6.65067 7.0007H1.75017ZM9.79538 9.24092C9.79258 9.29693 9.78698 9.3632 9.77858 9.43974C9.70132 10.017 9.50076 10.571 9.19052 11.0639C9.56156 11.1493 9.9942 11.2011 10.4997 11.2011C14 11.2011 14 8.75088 14 8.75088C14 7.78478 13.2159 7.0007 12.2498 7.0007H9.26893C9.60496 7.50195 9.79958 8.10261 9.79958 8.75088V9.10091L9.79538 9.24092Z" fill="#6F757D"/>
					</svg>
				</span> Subscribe
				</a> <a id="myTrash" class="menu-item" onclick="location.href='/users/my_trash'"> <span> <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path
					d="M0.803081 3.6C0.75393 3.14626 0.800899 2.68725 0.940928 2.25286C1.08096 1.81847 1.31091 1.41845 1.6158 1.07884C1.9207 0.739222 2.29371 0.467633 2.71054 0.281754C3.12737 0.0958753 3.57868 -0.000126421 4.03508 1.24943e-07H13.9651C14.4214 1.40087e-05 14.8726 0.0961191 15.2893 0.28206C15.706 0.468001 16.0789 0.73961 16.3837 1.07921C16.6885 1.41881 16.9183 1.81878 17.0583 2.2531C17.1983 2.68741 17.2452 3.14634 17.1961 3.6L15.6401 17.991C15.5806 18.5428 15.3193 19.0532 14.9064 19.424C14.4935 19.7948 13.9581 20 13.4031 20H4.59608C4.04124 20 3.50595 19.795 3.09305 19.4244C2.68015 19.0538 2.41876 18.5436 2.35908 17.992L0.803081 3.6ZM2.30308 2.997H15.6971C15.6363 2.58106 15.4278 2.20089 15.1098 1.92601C14.7918 1.65113 14.3854 1.49991 13.9651 1.5H4.03508C3.14508 1.5 2.42408 2.16 2.30308 2.997ZM8.79208 8.409C8.81495 8.37497 8.84584 8.34709 8.88202 8.32781C8.91821 8.30853 8.95858 8.29844 8.99958 8.29844C9.04058 8.29844 9.08095 8.30853 9.11714 8.32781C9.15332 8.34709 9.18421 8.37497 9.20708 8.409L9.87708 9.409C9.93043 9.49398 10.0003 9.5674 10.0825 9.62489C10.1647 9.68239 10.2577 9.7228 10.3558 9.74374C10.4539 9.76467 10.5553 9.76571 10.6538 9.74677C10.7524 9.72784 10.8461 9.68932 10.9295 9.63351C11.0129 9.5777 11.0842 9.50572 11.1393 9.42184C11.1943 9.33796 11.232 9.24389 11.2501 9.14519C11.2681 9.04648 11.2662 8.94516 11.2444 8.84722C11.2226 8.74928 11.1813 8.65671 11.1231 8.575L10.4541 7.575C10.2942 7.33574 10.0778 7.13961 9.82397 7.00396C9.57017 6.86832 9.28685 6.79736 8.99908 6.79736C8.71131 6.79736 8.42799 6.86832 8.17419 7.00396C7.9204 7.13961 7.70397 7.33574 7.54408 7.575L6.87608 8.575C6.76549 8.74036 6.72511 8.94289 6.76384 9.13802C6.80256 9.33315 6.91722 9.50491 7.08258 9.6155C7.24794 9.7261 7.45047 9.76647 7.6456 9.72775C7.84073 9.68902 8.01249 9.57436 8.12308 9.409L8.79208 8.409ZM6.89208 11.628C6.94393 11.5435 6.97853 11.4496 6.99386 11.3517C7.0092 11.2538 7.00498 11.1538 6.98144 11.0575C6.95789 10.9612 6.9155 10.8706 6.85671 10.7908C6.79792 10.711 6.7239 10.6436 6.63892 10.5926C6.55394 10.5416 6.45969 10.5079 6.36162 10.4936C6.26355 10.4792 6.16361 10.4844 6.06757 10.5089C5.97153 10.5334 5.88129 10.5767 5.80208 10.6363C5.72287 10.6958 5.65625 10.7705 5.60608 10.856L5.24208 11.463C4.44208 12.796 5.40208 14.493 6.95708 14.493H7.74908C7.94799 14.493 8.13876 14.414 8.27941 14.2733C8.42006 14.1327 8.49908 13.9419 8.49908 13.743C8.49908 13.5441 8.42006 13.3533 8.27941 13.2127C8.13876 13.072 7.94799 12.993 7.74908 12.993H6.95708C6.86847 12.9931 6.78141 12.9697 6.70482 12.9251C6.62824 12.8805 6.56488 12.8164 6.52123 12.7393C6.47758 12.6622 6.45522 12.5748 6.45642 12.4862C6.45762 12.3976 6.48236 12.3109 6.52808 12.235L6.89208 11.628ZM11.3661 10.598C11.2814 10.6486 11.2076 10.7154 11.1488 10.7946C11.09 10.8738 11.0474 10.9638 11.0234 11.0595C10.9995 11.1552 10.9946 11.2546 11.0091 11.3522C11.0237 11.4497 11.0573 11.5435 11.1081 11.628L11.4721 12.235C11.5176 12.3109 11.5421 12.3975 11.5431 12.4859C11.5442 12.5744 11.5218 12.6616 11.4782 12.7385C11.4346 12.8155 11.3713 12.8795 11.2949 12.924C11.2184 12.9686 11.1315 12.992 11.0431 12.992H10.2491C10.0502 12.992 9.8594 13.071 9.71875 13.2117C9.5781 13.3523 9.49908 13.5431 9.49908 13.742C9.49908 13.9409 9.5781 14.1317 9.71875 14.2723C9.8594 14.413 10.0502 14.492 10.2491 14.492H11.0431C12.5971 14.492 13.5581 12.797 12.7591 11.464L12.3951 10.857C12.3445 10.7725 12.2777 10.6988 12.1986 10.6401C12.1195 10.5813 12.0296 10.5388 11.934 10.5148C11.8385 10.4909 11.7391 10.486 11.6417 10.5004C11.5442 10.5149 11.4506 10.5484 11.3661 10.599"
					fill="#6F757D" />
					</svg>
				</span> My Trash
				</a>
			</nav>

		</div>
	</div>
	
	
	<!-- 전체 이름 -->
	<div id="tooltip" class="tooltip"></div>
	
	<script th:inline="javascript">
    window.onload = () => {
    	thumbnailPlay();
        /*<![CDATA[*/
        const loginUser = /*[[${session.loginUser}]]*/ 'loginUser';
        /*]]>*/
        const currentAddress = window.location.pathname;
        const arr = currentAddress.split('/');
        console.log("사이드바 : " + arr);
        console.log("사이드바 : " + arr[2]);
        let currentPage = null;

        switch (arr[2]) {
            case "my_projects":
                currentPage = "My Projects";
                break;
            case "my_favorites":
                currentPage = "My Favorites";
                break;
            case "my_downloads":
                currentPage = "My Downloads";
                break;
            case "my_account":
                currentPage = "My Account";
                break;
            case "my_inquiry":
                currentPage = "My Inquiry";
                break;
            case "my_payments":
                currentPage = "My Payments";
                break;
            case "my_commission":
                currentPage = "My Commission";
                break;
			case "subscribe":
				currentPage = "Subscribe";
				break;
            case "my_trash":
                currentPage = "My Trash";
                break;

        }

        const aTags = document.querySelectorAll("a");
        aTags.forEach(aTag => {
        	if (currentPage && aTag.innerText && aTag.innerText.includes(currentPage)){
                aTag.classList.add("active");
                const svg = aTag.querySelector("svg");
                if (svg) {
                    const paths = svg.querySelectorAll("path");
                    paths.forEach(path => {
                        path.setAttribute("fill", "#8137E9");
                    });
                }
            } else {
                aTag.classList.remove("active");
                const svg = aTag.querySelector("svg");
                if (svg) {
                    const paths = svg.querySelectorAll("path");
                    paths.forEach(path => {
                        path.setAttribute("fill", "#6F757D");
                    });
                }
            }
        });

        const follow = document.querySelectorAll(".svg-icon")[0].parentNode;
        $.ajax({
            url: "/users/findfollow",
            data: { userNo: loginUser.userNo },
            success: data => {
                follow.innerHTML =
                    '<object type="image/svg+xml" data="/img/subscribers.svg" class="svg-icon"></object> &nbsp' + data;
            },
            error: data => console.log(data)
        });
        
        document.querySelector('.dropdown-menu>li:first-child').addEventListener('click', () => {
            document.querySelector('input[type=file]').click();
        });
        
        document.querySelector('.dropdown-menu>li:last-child').addEventListener('click', () => {
            loadImage();
        });
    }
    
    const loadImage = file => {
        let imgFile = null;
        if(file != undefined) {
            const reader = new FileReader()
            reader.addEventListener('load', function() {
                file.previousElementSibling.children[0].src = this.result;
            });
            imgFile = file.files[0];
            reader.readAsDataURL(imgFile);
        }
        
        const formData = new FormData();
        formData.append('profile', imgFile);
        
        fetch('/users/profile', {
            method: 'PATCH',
            body: formData, // FormData 객체 사용 (processData: false, contentType: false 자동 적용됨)
        })
        .then(response => response.json()) // JSON 응답을 파싱
        .then(data => {
            if (data == 1) {
                location.reload(); // 페이지 새로고침
            } else {
                alert('프로필 변경을 실패하였습니다. 다시 시도해 주세요.');
            }
        })
        .catch(error => console.log(error)); // 오류 처리
    }
    
  //썸네일 불러오기
    function thumbnailPlay(r) {
		console.log("r : " + r);
        const thumbnailList = document.querySelectorAll('.item-thumbnail'); // 둘 다 잡아줌
        console.log(thumbnailList);
        
        [...thumbnailList].forEach((thumbnail) => {
        	 const contentNo = thumbnail.previousElementSibling.previousElementSibling.value;
        	 const menuNo = thumbnail.previousElementSibling.value;
        	 
//         	 console.log("contentNo : " + contentNo);
//         	 console.log("menuNo : " + menuNo);
        	 
        	 
        	 console.log(menuNo);
            fetch("/board/select-thumbnail/" + contentNo, {
                method: "get",
                headers: { 'content-type': 'application/json; charset=UTF-8' }
            })
            .then(response => response.json())
            .then(data => {
                if (menuNo == 1 || menuNo == 5) {
                    const video = thumbnail.children[0];
                	
                    console.log(video);
                    const source = video?.children[0];
                    if (source) {
                        source.src = data.thumbnail;
                        video.appendChild(source);
                        thumbnail.appendChild(video);
                        video.addEventListener('mouseenter', () => {
                        	video.play()
                        });
                        video.addEventListener('mouseleave', () => {
                            video.pause();
                            video.currentTime = 0;
                        });
                    }
                } else if(menuNo == 4 || menuNo == 6 || menuNo == 7 || menuNo == 2) {
                    const img = thumbnail.children[0];
                    if (img) img.src = data.thumbnail;
                }
            });
        });
    }
  
  //디테일 페이지 들어가기 및 제목 마우스 
  	const tooltip = document.getElementById('tooltip');
  
    function clickDetail(list) {
    	console.log(list);
        [...list].map((content, index, array) => {
        	console.log(content);
            content.addEventListener('click', function(event) {
                const contentNo = this.children[0].value;
                console.log(contentNo);
                let menuName = this.querySelector('.item-content').children[1].value;
                console.log(contentNo);
                console.log(menuName);
                switch(menuName) {
                    case "video Templates":  menuName = "video-templates"; break;
                    case "Stock Video" : menuName = "stock-video"; break;
                    case "Sound Effects" : menuName = "sound-effects"; break;
                    case "Photos" : menuName = "photo"; break;
                    case "Music" : menuName = "music"; break;
                    case "Fonts" : menuName = "fonts"; break;
                    case "Graphic Templates" : menuName = "graphic-templates"; break;
                }
                location.href = "/board/" + menuName + "/" + contentNo;
                event.stopPropagation();
            })
            
            
            content.addEventListener('mousemove', function(e){
            	console.log(this);
            	const title = this.children[5].children[0].innerText;
//             	console.log(tooltip);
            	tooltip.style.display = 'block';
            	tooltip.textContent = title;
//             	console.log(this);
            	tooltip.style.left = `${e.clientX + 10}px`;
            	tooltip.style.top = `${e.clientY + 10}px`;
            })
            content.addEventListener('mouseleave', function(){
            	tooltip.style.display = 'none';
            })
        })
    }
  
  	
	</script>
</body>
</html>